name: Docker Token Tester

on:
  workflow_dispatch:   # Run manually

jobs:
  docker-token-test:
    runs-on: ubuntu-latest

    steps:
      - name: Check Docker Token Exists
        run: |
          if [ -z "${{ secrets.DOCKER_USERNAME }}" ]; then
            echo "❌ Missing: DOCKER_USERNAME"
            exit 1
          fi

          if [ -z "${{ secrets.DOCKER_TOKEN }}" ]; then
            echo "❌ Missing: DOCKER_TOKEN"
            exit 1
          fi

          echo "✔ Secrets found"

      - name: Attempt Docker Login
        run: |
          echo "${{ secrets.DOCKER_TOKEN }}" | \
          docker login -u "${{ secrets.DOCKER_USERNAME }}" --password-stdin

      - name: Print Login Status
        run: |
          echo "✔ Docker token is valid"